<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top Books of the Month</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #15b794;
            margin-bottom: 20px;
        }
        .book-item {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
            background-color: #fff;
        }
        .book-item:last-child {
            margin-bottom: 0;
        }
        .book-title {
            font-size: 1.4em;
            color: #333;
            margin-bottom: 10px;
        }
        .book-rating {
            font-size: 1.2em;
            font-weight: bold;
        }
        .book-thoughts {
            font-style: italic;
        }
        .book-date {
            color: #888;
            font-size: 0.9em;
        }
        .read-again {
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Top Books of the Month</h1>
        <div id="booksContainer"></div>
    </div>

    <script>
        // Retrieve data from local storage
        var fictionReviews = JSON.parse(localStorage.getItem('fictionbookReviews'));
        var comedyReviews = JSON.parse(localStorage.getItem('comedybookReviews'));
        var horrorReviews = JSON.parse(localStorage.getItem('horrorbookReviews'));
        var nonfictionReviews = JSON.parse(localStorage.getItem('nonfictionbookReviews'));
        var othersReviews = JSON.parse(localStorage.getItem('othersbookReviews'));
        var mangaReviews = JSON.parse(localStorage.getItem('mangabookReviews'));
        var thrillerReviews = JSON.parse(localStorage.getItem('thrillerbookReviews'));
        var romanceReviews = JSON.parse(localStorage.getItem('romancebookReviews'));

        console.log('Retrieved book reviews:', { fictionReviews, comedyReviews, horrorReviews, nonfictionReviews, othersReviews, mangaReviews, thrillerReviews, romanceReviews }); // Check if book reviews are retrieved correctly

        // Function to sort and display reviews
        function sortAndDisplayReviews(reviews, category) {
            if (reviews) {
                // Sort reviews by book rating
                reviews.sort(function(a, b) {
                    return parseInt(b.book_rating) - parseInt(a.book_rating);
                });

                // Display sorted reviews
                var booksContainer = document.getElementById('booksContainer');
                var categoryHeader = document.createElement('h2');
                categoryHeader.textContent = category + ' Books';
                booksContainer.appendChild(categoryHeader);

                reviews.forEach(function(book) {
                    var bookItem = document.createElement('div');
                    bookItem.classList.add('book-item');
                    bookItem.innerHTML = `
                        <div class="book-rating">Rating: ${book.book_rating}</div>
                        <div class="book-rating">Impact Rating: ${book.impact_rating}</div>
                        <div class="book-date">Review Date: ${book.review_date}</div>
                        <div class="book-thoughts">Thoughts: ${book.overall_thoughts}</div>
                        <div class="read-again">Read Again: ${book.read_again}</div>
                    `;
                    booksContainer.appendChild(bookItem);
                });
            } else {
                console.log(`No ${category.toLowerCase()} book reviews found in local storage.`);
            }
        }

        // Sort and display each category of reviews
        sortAndDisplayReviews(fictionReviews, 'Fiction');
        sortAndDisplayReviews(comedyReviews, 'Comedy');
        sortAndDisplayReviews(horrorReviews, 'Horror');
        sortAndDisplayReviews(nonfictionReviews, 'Non-Fiction');
        sortAndDisplayReviews(othersReviews, 'Others');
        sortAndDisplayReviews(mangaReviews, 'Manga');
        sortAndDisplayReviews(thrillerReviews, 'Thriller');
        sortAndDisplayReviews(romanceReviews, 'Romance');
    </script>
</body>
</html>













